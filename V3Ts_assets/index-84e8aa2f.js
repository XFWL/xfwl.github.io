import{d as P,G as U,N as _,$ as f,i as v,r as s,K as q,o as p,c as C,h as l,w as t,y as b,g as k,x as d,t as A,a as E,M as y}from"./index-a821daa1.js";const F={style:{"margin-left":"12px"}},J={name:"Permission"},G=P({...J,setup(O){U(()=>{r()});function r(){_(()=>f.acl.menu.reqMenulist(),i=>{w.value=i.data})}const w=v(),o=v({way:void 0,isShow:!1}),a=v({name:"",code:""});function g(i,n){a.value={name:"",code:""},a.value.level=i.level+1,a.value.pid=i.id,o.value.way=n,o.value.isShow=!0,n==2&&(a.value=JSON.parse(JSON.stringify(i)))}function x(){_(()=>f.acl.menu.reqAddAndUpdateMenu(a.value),()=>{o.value.way==1?y.success("添加成功"):y.success("更新成功"),o.value.isShow=!1,r()})}function S(i){_(()=>f.acl.menu.reqDelMenu(i),()=>{y.success("删除成功"),r()})}return(i,n)=>{const m=s("el-table-column"),u=s("el-button"),$=s("el-popconfirm"),N=s("el-table"),h=s("el-input"),M=s("el-form-item"),D=s("el-form"),B=s("el-dialog"),c=q("my-show-button");return p(),C("div",null,[l(N,{data:w.value,border:"","row-key":"id"},{default:t(()=>[l(m,{prop:"name",label:"名字","min-width":"300"}),l(m,{prop:"code",label:"权限值","min-width":"300"}),l(m,{prop:"updateTime",label:"修改时间","min-width":"300"}),l(m,{label:"操作","min-width":"300"},{default:t(({row:e})=>[b((p(),k(u,{disabled:e.level==4,type:"primary",onClick:V=>g(e,1)},{default:t(()=>[d(A(e.level==3?"添加功能":"添加菜单"),1)]),_:2},1032,["disabled","onClick"])),[[c,"btn.Permission.add"]]),b((p(),k(u,{disabled:e.level==1,type:"warning",onClick:V=>g(e,2)},{default:t(()=>[d("编辑")]),_:2},1032,["disabled","onClick"])),[[c,"btn.Permission.update"]]),b((p(),C("span",F,[l($,{title:`确定删除 ${e.name} ?`,width:"300px",onConfirm:V=>S(e.id)},{reference:t(()=>[l(u,{disabled:e.level==1,type:"danger"},{default:t(()=>[d("删除")]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"])])),[[c,"btn.Permission.remove"]])]),_:1})]),_:1},8,["data"]),l(B,{title:o.value.way==1?"添加菜单":"更新菜单",modelValue:o.value.isShow,"onUpdate:modelValue":n[3]||(n[3]=e=>o.value.isShow=e),width:"600px"},{footer:t(()=>[E("span",null,[l(u,{onClick:n[2]||(n[2]=e=>o.value.isShow=!1)},{default:t(()=>[d("取消")]),_:1}),l(u,{type:"primary",onClick:x},{default:t(()=>[d("确定")]),_:1})])]),default:t(()=>[l(D,{inline:!1,"label-width":"80px"},{default:t(()=>[l(M,{label:"名字"},{default:t(()=>[l(h,{modelValue:a.value.name,"onUpdate:modelValue":n[0]||(n[0]=e=>a.value.name=e),placegolder:"请你输入名字"},null,8,["modelValue"])]),_:1}),l(M,{label:"权限值"},{default:t(()=>[l(h,{modelValue:a.value.code,"onUpdate:modelValue":n[1]||(n[1]=e=>a.value.code=e),placegolder:"请你输入权限值"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["title","modelValue"])])}}});export{G as default};
