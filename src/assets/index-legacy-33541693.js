System.register([],(function(t,e){"use strict";return{execute:function(){!function(){document.title="烟花demo";const t=document.createElement("div"),e=document.createElement("canvas"),n=e.getContext("2d"),i=document.createElement("canvas");function d(){t.style.width=innerWidth+"px",t.style.height=innerHeight+"px",e.width=innerWidth,e.height=innerHeight,i.width=innerWidth,i.height=innerHeight}e.getContext("2d"),d(),window.addEventListener("resize",d),document.body.append(t),document.body.append(e),document.body.append(i),t.style.position="absolute",t.style.backgroundColor="black",t.style.zIndex="-3",e.style.position="absolute",e.style.zIndex="-1",i.style.position="absolute",i.style.zIndex="-2",i.style.backgroundPosition="center center",i.style.backgroundSize="100% 100%",i.style.backgroundRepeat="no-repeat";const o=new Image;function r(t,e){return Math.sin(t/180*Math.PI)*e}o.src="./src/image/myImage.png",t.style.width="100%",t.style.height="100%",o.onload=function(){i.style.background="url(./image/myImage.png)"};const a=[],s=[];let g=0;e.addEventListener("mousedown",(function(t){const n=t.offsetX,i=t.offsetY,d={};d.id=g,d.x=.2*e.width+e.width*Math.random()*.6,d.y=e.height,d.endX=t.offsetX,d.endY=t.offsetY,d.size=4,d.isEnd=!1,d.rgbR=Math.round(100*Math.random()+155),d.rgbG=Math.round(255*Math.random()),d.rgbB=Math.round(255*Math.random()),d.rgbA=1,a.push(d);for(let e=0;e<100;e++){const t={};t.id=g,t.x=n,t.y=i,t.random=2.5*Math.random()+.1,t.r=t.random,t.deg=3.6*e,t.size=3,t.isEnd=!1,99==e&&(t.isEnd=!0),t.rgbR=Math.round(100*Math.random()+155),t.rgbG=Math.round(255*Math.random()),t.rgbB=Math.round(255*Math.random()),t.rgbA=1,s.push(t)}g++})),function t(){n.globalCompositeOperation="destination-out",n.fillStyle="rgba(0,0,0,0.1)",n.fillRect(0,0,e.width,e.height),n.globalCompositeOperation="lighter",function(){for(let e=0;e<a.length;e++)a[e].x+=(a[e].endX-a[e].x)/50,a[e].y+=(a[e].endY-a[e].y)/50,n.beginPath(),n.fillStyle=`rgba(${a[e].rgbR},${a[e].rgbG},${a[e].rgbB},${a[e].rgbA})`,n.arc(a[e].x,a[e].y,a[e].size,0,2*Math.PI),n.fill(),(Math.abs(a[e].endY-a[e].y)**2+Math.abs(a[e].endX-a[e].x)**2)**.5<200&&(a[e].rgbA-=.011),a[e].rgbA<=0&&t(a[e].id);function t(t){const i=s.filter((e=>e.id==t));for(let g=0;g<i.length;g++){if(i[g].rgbA<=0){if(i[g].isEnd){a.splice(a.indexOf(a.find((e=>e.id==t))),1),s.splice(s.indexOf(s.find((t=>t.id==i[g].id&&t.random==i[g].random))),1);continue}s.splice(s.indexOf(s.find((t=>t.id==i[g].id&&t.random==i[g].random))),1);continue}let h=(d=i[g].deg,o=i[g].r,0==d?o:Math.cos(d/180*Math.PI)*o),l=r(i[g].deg,i[g].r)+.35;i[g].x+=h,i[g].y+=l,n.beginPath(),n.fillStyle=`rgba(${i[g].rgbR},${i[g].rgbG},${i[g].rgbB},${i[g].rgbA})`,n.arc(i[g].x,i[g].y+1,i[g].size,0,2*Math.PI),n.fill(),e.width<500?(i[g].r*=1-i[g].random/(.3*e.width*(.5*Math.random()+1)),i[g].rgbA-=.015):(i[g].r*=1-i[g].random/(.15*e.width),i[g].rgbA-=.003)}var d,o}}(),requestAnimationFrame(t)}()}()}}}));
