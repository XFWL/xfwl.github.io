System.register([],(function(t,n){"use strict";return{execute:function(){!function(){document.title="烟花demo";var t=document.createElement("div"),n=document.createElement("canvas"),e=n.getContext("2d"),r=document.createElement("canvas");function i(){t.style.width=innerWidth+"px",t.style.height=innerHeight+"px",n.width=innerWidth,n.height=innerHeight,r.width=innerWidth,r.height=innerHeight}n.getContext("2d"),i(),window.addEventListener("resize",i),document.body.append(t),document.body.append(n),document.body.append(r),t.style.position="absolute",t.style.backgroundColor="black",t.style.zIndex="-3",n.style.position="absolute",n.style.zIndex="-1",r.style.position="absolute",r.style.zIndex="-2",r.style.backgroundPosition="center center",r.style.backgroundSize="100% 100%",r.style.backgroundRepeat="no-repeat";var a=new Image;a.src="./image/myImage.png",t.style.width="100%",t.style.height="100%",a.onload=function(){r.style.background="url(./image/myImage.png)"};var o=[],d=[],c=0;function h(){for(var t=0;t<o.length;t++)o[t].x+=(o[t].endX-o[t].x)/50,o[t].y+=(o[t].endY-o[t].y)/50,e.beginPath(),e.fillStyle="rgba(".concat(o[t].rgbR,",").concat(o[t].rgbG,",").concat(o[t].rgbB,",").concat(o[t].rgbA,")"),e.arc(o[t].x,o[t].y,o[t].size,0,2*Math.PI),e.fill(),Math.pow(Math.pow(Math.abs(o[t].endY-o[t].y),2)+Math.pow(Math.abs(o[t].endX-o[t].x),2),.5)<200&&(o[t].rgbA-=.011),o[t].rgbA<=0&&r(o[t].id);function r(t){for(var r=d.filter((function(n){return n.id==t})),i=function(i){if(r[i].rgbA<=-1)return r[i].isEnd?(o.splice(o.indexOf(o.find((function(n){return n.id==t}))),1),d.splice(d.indexOf(d.find((function(t){return t.id==r[i].id&&t.random==r[i].random}))),1),"continue"):(d.splice(d.indexOf(d.find((function(t){return t.id==r[i].id&&t.random==r[i].random}))),1),"continue");var a,c,h=(a=r[i].deg,c=r[i].r,0==a?c:Math.cos(a/180*Math.PI)*c),g=function(t,n){return Math.sin(t/180*Math.PI)*n}(r[i].deg,r[i].r)+.35;r[i].x+=h,r[i].y+=g,e.beginPath(),e.fillStyle="rgba(".concat(r[i].rgbR,",").concat(r[i].rgbG,",").concat(r[i].rgbB,",").concat(r[i].rgbA,")"),e.arc(r[i].x,r[i].y+1,r[i].size,0,2*Math.PI),e.fill(),n.width<500?(r[i].r*=1-r[i].random/(.35*n.width*(.5*Math.random()+1)),r[i].rgbA-=.0095):(r[i].r*=1-r[i].random/(.15*n.width*(.5*Math.random()+1)),r[i].rgbA-=.009)},a=0;a<r.length;a++)i(a)}}n.addEventListener("mousedown",(function(t){var e=t.offsetX,r=t.offsetY,i={};i.id=c,i.x=.2*n.width+n.width*Math.random()*.6,i.y=n.height,i.endX=t.offsetX,i.endY=t.offsetY,i.size=4,i.isEnd=!1,i.rgbR=Math.round(100*Math.random()+155),i.rgbG=Math.round(255*Math.random()),i.rgbB=Math.round(255*Math.random()),i.rgbA=1,o.push(i);for(var a=0;a<100;a++){var h={};h.id=c,h.x=e,h.y=r,h.random=2.5*Math.random()+.1,h.r=h.random,h.deg=3.6*a,h.size=3,h.isEnd=!1,99==a&&(h.isEnd=!0),h.rgbR=Math.round(255*Math.random()),h.rgbG=Math.round(255*Math.random()),h.rgbB=Math.round(255*Math.random()),h.rgbA=1*Math.random()+1,d.push(h)}c++})),function t(){e.globalCompositeOperation="destination-out",e.fillStyle="rgba(0,0,0,0.125)",e.fillRect(0,0,n.width,n.height),e.globalCompositeOperation="lighter",h(),requestAnimationFrame(t)}()}()}}}));
