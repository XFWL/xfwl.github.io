import{d as Q,G as T,N as w,$ as g,i as S,r as u,K as W,o as c,c as v,h as e,w as n,a as $,y as k,u as _,a0 as H,a1 as J,P as R,M as x,a2 as X,Q as Y,x as m,z as Z,t as b,F as z,f as N,g as V,_ as ee}from"./index-7f2c2fc1.js";const te=["src"],ae={style:{"margin-left":"12px"}},le=["src"],ne={name:"Sku"},oe=Q({...ne,setup(ue){T(()=>{f(a.value.page,a.value.limit)});function f(s,o){w(()=>g.product.sku.reqGetSkuList(s,o),i=>{a.value.page=i.data.current,a.value.total=i.data.total,D.value=i.data})}const D=S();function q(s){w(()=>s.isSale==1?g.product.sku.reqCancelSale(s.id):g.product.sku.reqOnSale(s.id),async()=>{await f(a.value.page,a.value.limit),s.isSale==1?x.success("下架成功"):x.success("上架成功")})}const C=S(!1),d=S();function I(s){w(()=>g.product.sku.reqGetSkuInfo(s.id),async o=>{await(d.value=o.data),C.value=!0})}function A(s){w(()=>g.product.sku.reqDelSku(s.id),()=>{f(a.value.page,a.value.limit),x.success("删除成功")})}const a=S({page:1,total:0,limit:10});function B(){a.value.page=1,f(a.value.page,a.value.limit)}function G(){f(a.value.page,a.value.limit)}return(s,o)=>{const i=u("el-table-column"),y=u("el-button"),P=u("el-popconfirm"),U=u("el-table"),F=u("el-pagination"),M=u("el-card"),p=u("el-form-item"),L=u("el-tag"),E=u("el-carousel-item"),j=u("el-carousel"),K=u("el-form"),O=u("el-drawer"),h=W("my-show-button");return c(),v("div",null,[e(M,{shadow:"always"},{default:n(()=>{var t;return[e(U,{data:(t=D.value)==null?void 0:t.records,class:"table_css",border:"",stripe:""},{default:n(()=>[e(i,{type:"index",label:"序号",align:"center",width:"150"}),e(i,{prop:"skuName",label:"名字","show-overflow-tooltip":"",width:"200"}),e(i,{prop:"skuDesc",label:"描述","show-overflow-tooltip":"",width:"200"}),e(i,{label:"默认图片",width:"200"},{default:n(({row:l})=>[$("img",{style:{width:"100px","min-height":"100px",display:"block"},src:l.skuDefaultImg,alt:"图片显示失败"},null,8,te)]),_:1}),e(i,{prop:"weight",label:"重量(g)",width:"200"}),e(i,{prop:"price",label:"价格(元)",width:"200"}),e(i,{fixed:"right",label:"操作",width:"300"},{default:n(({row:l})=>[k(e(y,{type:l.isSale==1?"info":"warning",icon:l.isSale==1?_(H):_(J),onClick:r=>q(l)},null,8,["type","icon","onClick"]),[[h,"btn.Sku.updown"]]),k(e(y,{type:"primary",icon:_(R),onClick:o[0]||(o[0]=r=>_(x).success("正在开发中……"))},null,8,["icon"]),[[h,"btn.Sku.update"]]),k(e(y,{type:"info",icon:_(X),onClick:r=>I(l)},null,8,["icon","onClick"]),[[h,"btn.Sku.detail"]]),k((c(),v("span",ae,[e(P,{title:`确定删除 ${l.skuName} ?`,width:"300px",onConfirm:r=>A(l)},{reference:n(()=>[e(y,{type:"danger",icon:_(Y)},null,8,["icon"])]),_:2},1032,["title","onConfirm"])])),[[h,"btn.Sku.remove"]])]),_:1})]),_:1},8,["data"]),k(e(F,{onSizeChange:B,onCurrentChange:G,total:a.value.total,currentPage:a.value.page,"onUpdate:currentPage":o[1]||(o[1]=l=>a.value.page=l),"page-size":a.value.limit,"onUpdate:pageSize":o[2]||(o[2]=l=>a.value.limit=l),"page-sizes":[10,20,30],layout:"prev, pager, next, jumper, ->, sizes, total",background:""},{default:n(()=>[m(' :pager-count="7"> ')]),_:1},8,["total","currentPage","page-size"]),[[Z,a.value.total>10]])]}),_:1}),e(O,{title:"查看商品详情",modelValue:C.value,"onUpdate:modelValue":o[3]||(o[3]=t=>C.value=t),direction:"rtl",size:"700px","destroy-on-close":!0,"show-close":!0,wrapperClosable:!0},{default:n(()=>[e(K,{"label-width":"80px",inline:!1},{default:n(()=>[e(p,{label:"名字"},{default:n(()=>{var t;return[m(b((t=d.value)==null?void 0:t.skuName),1)]}),_:1}),e(p,{label:"描述"},{default:n(()=>{var t;return[m(b((t=d.value)==null?void 0:t.skuDesc),1)]}),_:1}),e(p,{label:"价格"},{default:n(()=>{var t;return[m(b((t=d.value)==null?void 0:t.price),1)]}),_:1}),e(p,{label:"平台属性"},{default:n(()=>{var t;return[(c(!0),v(z,null,N((t=d.value)==null?void 0:t.skuAttrValueList,(l,r)=>(c(),V(L,{style:{margin:"5px"},key:r,type:"success",effect:"light"},{default:n(()=>[m(b(l.valueName),1)]),_:2},1024))),128))]}),_:1}),e(p,{label:"销售属性"},{default:n(()=>{var t;return[(c(!0),v(z,null,N((t=d.value)==null?void 0:t.skuSaleAttrValueList,(l,r)=>(c(),V(L,{style:{margin:"5px"},key:r,type:"danger",effect:"light"},{default:n(()=>[m(b(l.saleAttrValueName),1)]),_:2},1024))),128))]}),_:1}),e(p,{label:"商品图片"},{default:n(()=>[e(j,{type:"card",interval:5e3,arrow:"always"},{default:n(()=>{var t;return[(c(!0),v(z,null,N((t=d.value)==null?void 0:t.skuImageList,(l,r)=>(c(),V(E,{key:r},{default:n(()=>[$("img",{style:{width:"100%"},src:l.imgUrl,alt:"显示失败"},null,8,le)]),_:2},1024))),128))]}),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});const ie=ee(oe,[["__scopeId","data-v-ec67d4a1"]]);export{ie as default};
